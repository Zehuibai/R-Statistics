# Cluster Algorithm

有一个响应变量Y，Y是X的函数，或表示为 y = f(x)。我们的数据中有Y的实际值，以Y为依据训练X。这种方式称为监督式学习。但是，我 们从数据中学习知识的时候通常**没有响应变量Y，或者故意忽略了Y**。此时就进入无监督学习 的世界。在这个世界里，我们建立和选择算法的基准是算法能够明确满足业务需求的程度，而 不是算法的正确率。

聚类分析的目标是将 观测分成若干组（k个组），使**同一组内的成员尽可能相似，不同组间的成员尽可能不同**. 两种最常用的技术：**层次聚类Hierarchical Clustering**和 **K均值聚类K-Means Clustering**。它们都是非常有效的聚类方法。

但如果你要分析的是大规模的高复杂度的数据集， 它们可能不太适合。所以，我们还要研究围绕中心点的划分，它使用基于**果瓦度量的相异度矩阵**作为输入。



#### 相异度矩阵 dissimilarity matrix

存储 $$\mathrm{n}$$个对象两两之间的近似性，表现形式是一个 $$\mathrm{n}^{*} \mathrm{n}$$ 维的矩阵。在这里 $$\mathrm{d}(\mathrm{i}, \mathrm{j})$$ 是对象 $$\mathrm{i}$$ 和对象 $$\mathrm{j}$$ 之间相异性的量化表示，通常它是一个非负的数值，当对象 i 和j 越相似，其值越接近 0; 两个对象越不同，其值越大。既然 $$\mathrm{d}(\mathrm{i}, \mathrm{j})=\mathrm{d}(\mathrm{j}, \mathrm{i}),$$ 而且 $$\mathrm{d}(\mathrm{i}, \mathrm{i})=0,$$ 我们可以得到如下的矩阵。

$$
\left[\begin{array}{ccccc}
0 & & & & \\
d(2,1) & 0 & & & \\
d(3,1) & d(3,2) & 0 & & \\
\vdots & \cdots & \cdots & \cdots & \cdots \\
d(n, 1) & d(n, 2) & \ldots & \ldots & 0
\end{array}\right]
$$

#### 不同数据类型的相异度计算 (距离法)

把一个观测看做M维空间中的一个点，并在空间中定义距离。基于距离的聚类算法是把距离较近的点可以归入同一类，距离远的点归入不同的类。常见的距离度量方法有欧几里得距离、切比雪夫距离、曼哈顿距离、兰氏距离等方法。

```
a=matrix(rnorm(15,0,1),c(3,5))

##            [,1]       [,2]       [,3]       [,4]       [,5]
## [1,]  1.9074296 -0.2011379 -0.1028532 -0.3381349 -1.2911777
## [2,] -0.6869984 -0.7304278 -0.5474009  2.3833986 -0.5018333
## [3,]  0.4543562 -0.9993289 -0.2578989 -1.5207856  0.5243382

## 欧几里得距离
dist(a,p=2)
## 第一个行与第二行的距离为2.174710；第二行与第三行的距离为3.966592

##          1        2
## 2 3.903670         
## 3 2.732642 4.213608



## 切比雪夫距离
## 国际象棋中，国王可以直行、横行、斜行，所以国王走一步可以移动到相邻8个方格中的任意一个。
   国王从格子(x1,y1)走到格子(x2,y2)最少需要多少步？这个距离就叫切比雪夫距离。
dist(a,"maximum")

##          1        2
## 2 2.611308         
## 3 1.197499 2.055113


## 曼哈顿距离
## 在曼哈顿街区要从一个十字路口开车到另一个十字路口，驾驶距离显然不是两点间的直线距离。
   这个实际驾驶距离就是“曼哈顿距离”。曼哈顿距离也称为“城市街区距离”(City Block distance)。
dist(aa,"manhattan")

##          1        2
## 2 7.085753         
## 3 1.260298 6.612512




## 兰氏距离
## 兰氏距离假定变量之间相互独立，没有考虑变量之间的相关性
dist(aa, method = "canberra")

##          1        2
## 2 2.188827         
## 3 4.898122 3.964912
```

